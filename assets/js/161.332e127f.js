(window.webpackJsonp=window.webpackJsonp||[]).push([[161],{748:function(e,t,a){"use strict";a.r(t);var s=a(1),o=Object(s.a)({},(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[a("h1",{attrs:{id:"data-storage-contracts"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#data-storage-contracts"}},[e._v("#")]),e._v(" Data Storage Contracts")]),e._v(" "),a("p",[e._v("Letâ€™s look at some simple examples on how to store and access data through smart contracts.")]),e._v(" "),a("h2",{attrs:{id:"simple-storage-example"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#simple-storage-example"}},[e._v("#")]),e._v(" Simple Storage Example")]),e._v(" "),a("p",[e._v("Here's an example that sets the value of a variable and defines a "),a("strong",[e._v("getter")]),e._v(" function for accessing that variable.")]),e._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"solidity",base64:"cHJhZ21hIHNvbGlkaXR5cHAgXjAuNC4zOwoKY29udHJhY3QgU2ltcGxlU3RvcmFnZSB7CiAgICB1aW50IHN0b3JlZERhdGE7CgogICAgb25NZXNzYWdlIHNldCh1aW50IHgpIHsKICAgICAgICBzdG9yZWREYXRhID0geDsKICAgIH0KCiAgICAvLyBkZWZpbmUgYW4gb2ZmLWNoYWluIG1ldGhvZCB0byBhY2Nlc3Mgc3RvcmVkRGF0YQogICAgZ2V0dGVyIGdldCgpIHJldHVybnModWludCkgewogICAgICAgIHJldHVybiBzdG9yZWREYXRhOwogICAgfQp9"}}),e._v(" "),a("p",[e._v("The line "),a("code",[e._v("uint storedData;")]),e._v(" declares a state variable (an unsigned 256 bit integer) which is stored on the block chain and avaliable to any functions within the contract.")]),e._v(" "),a("p",[a("code",[e._v("6-8")]),e._v(" Defines a message listener allowing anyone to modify our state variable by calling the set function.")]),e._v(" "),a("p",[a("code",[e._v("11-13")]),e._v(" Defines a "),a("strong",[e._v("getter")]),e._v(" function that can be used to access the value of "),a("code",[e._v("storedData")]),e._v(".")]),e._v(" "),a("p",[e._v("So far this seems relatively straightforward, but there is an important caveat: getter functions are off-chain, and can "),a("em",[e._v("not")]),e._v(" be called by other contracts. They are conveniences for interfaces or front ends to collect needed information.")]),e._v(" "),a("p",[e._v("So how do contracts interact?\nOne of the challenges of Solidity++ is understanding the asynchronous design and how values can not be returned by functions. Rather than return values, a message can be passed to request a value, and upon receiving the message, a response message can be generated and sent back.")]),e._v(" "),a("h2",{attrs:{id:"contract-accessible-storage"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#contract-accessible-storage"}},[e._v("#")]),e._v(" Contract Accessible Storage")]),e._v(" "),a("p",[e._v("Here we look at an example of basic communication between contracts. We set up two contracts which are intended to work with eachother.")]),e._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"solidity",base64:"cHJhZ21hIHNvbGlkaXR5cHAgXjAuNC4zOwoKY29udHJhY3QgQ29udHJhY3RTdG9yYWdlIHsKICAgIHVpbnQgc3RvcmVkRGF0YTsKCiAgICBtZXNzYWdlIHJlcGx5RGF0YSh1aW50KTsKCiAgICBvbk1lc3NhZ2Ugc2V0KHVpbnQgeCkgewogICAgICAgIHN0b3JlZERhdGEgPSB4OwogICAgfQogICAgCiAgICBvbk1lc3NhZ2UgcmVxdWVzdERhdGEoKSB7CiAgICAgICAgc2VuZChtc2cuc2VuZGVyLCByZXBseURhdGEoc3RvcmVkRGF0YSkpOwogICAgfQp9Cg=="}}),e._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"solidity",base64:"Y29udHJhY3QgQWNjZXNzZXIgewogICAgdWludCBjb3B5RGF0YTsKCiAgICBtZXNzYWdlIHJlcXVlc3REYXRhKCk7CiAgICAKICAgIG9uTWVzc2FnZSB1cGRhdGVDb3B5RGF0YShhZGRyZXNzIGNvbnRyYWN0QWRkcil7CiAgICAgICAgc2VuZChjb250cmFjdEFkZHIsIHJlcXVlc3REYXRhKCkpOwogICAgfQogICAgCiAgICBvbk1lc3NhZ2UgcmVwbHlEYXRhKHVpbnQgeCl7CiAgICAgICAgY29weURhdGEgPSB4OwogICAgfQoKICAgIGdldHRlciBnZXQoKSByZXR1cm5zKHVpbnQpewogICAgICAgIHJldHVybiBjb3B5RGF0YTsKICAgIH0KfQ=="}}),e._v(" "),a("h4",{attrs:{id:"message-and-send"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#message-and-send"}},[e._v("#")]),e._v(" Message and Send")]),e._v(" "),a("p",[e._v("Here we are introduced to "),a("code",[e._v("message")]),e._v(" and "),a("code",[e._v("send")]),e._v(", new features of Solidity++.")]),e._v(" "),a("p",[e._v("A "),a("code",[e._v("message")]),e._v(" is a data structure containing the call signature that cooresponds to a message listener. A message can then be populated with data and sent to an address using "),a("code",[e._v("send")]),e._v(". If there is a cooresponding message listener at the target address, that function will be called.")]),e._v(" "),a("p",[e._v("However, "),a("code",[e._v("send")]),e._v(" is "),a("em",[e._v("non-blocking")]),e._v(", and the contract receiving a message may execute the function call at a later time. This does require some consideration.")]),e._v(" "),a("h4",{attrs:{id:"how-it-works"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#how-it-works"}},[e._v("#")]),e._v(" How it works")]),e._v(" "),a("p",[e._v("In this example, the contract "),a("code",[e._v("ContractStorage")]),e._v(" has the same "),a("code",[e._v("storedData")]),e._v(" and "),a("code",[e._v("set")]),e._v(" functions as our "),a("code",[e._v("SimpleStorage")]),e._v(" contract did, but there is no "),a("code",[e._v("getter")]),e._v(" function. Instead, there is a "),a("code",[e._v("requestData")]),e._v(" function which will reply to the sender with a "),a("code",[e._v("replyData")]),e._v(" message using "),a("code",[e._v("send")]),e._v(".")]),e._v(" "),a("p",[e._v("Meanwhile, the "),a("code",[e._v("Accesser")]),e._v(" contract is designed to store a copy of the data contained in "),a("code",[e._v("ContractStorage")]),e._v(". A user calls the "),a("code",[e._v("updateCopyData")]),e._v(" function with the address of the "),a("code",[e._v("ContractStorage")]),e._v(" contract, to initiate the update process. "),a("code",[e._v("Accesser")]),e._v(" will send a "),a("code",[e._v("requestData")]),e._v(" message to "),a("code",[e._v("ContractStorage")]),e._v(", which will react to the request and respond with a "),a("code",[e._v("replyData")]),e._v(" message, allowing "),a("code",[e._v("Accesser")]),e._v(" to update it's local copy "),a("code",[e._v("copyData")]),e._v(".")])],1)}),[],!1,null,null,null);t.default=o.exports}}]);