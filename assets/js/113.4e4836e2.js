(window.webpackJsonp=window.webpackJsonp||[]).push([[113],{714:function(e,t,a){"use strict";a.r(t);var s=a(1),n=Object(s.a)({},(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[a("h1",{attrs:{id:"introduction-to-solidity-0-4"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#introduction-to-solidity-0-4"}},[e._v("#")]),e._v(" Introduction to Solidity++ 0.4")]),e._v(" "),a("p",[e._v("Solidity++ retains most syntax of Solidity. However, Solidity++ is still a different language. The difference mainly lies in asynchronous design.")]),e._v(" "),a("h2",{attrs:{id:"syntax-removed-in-solidity"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#syntax-removed-in-solidity"}},[e._v("#")]),e._v(" Syntax Removed in Solidity++")]),e._v(" "),a("p",[e._v("Below syntax has been removed from Solidity")]),e._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"",base64:"dHguZ2FzcHJpY2U7CmJsb2NrLmNvaW5iYXNlOwpibG9jay5kaWZmaWN1bHR5OwpibG9jay5nYXNsaW1pdDsKYmxvY2toYXNoKHBhcmFtKTsKZ2FzbGVmdCgpOwptc2cuZ2FzOwpzZWxmZGVzdHJ1Y3QoX293bmVyKTsKc3VpY2lkZShfYWRkcik7CmFkZHJlc3MoX2FkZHIpLnNlbmQoX2Ftb3VudCk7Cg=="}}),e._v(" "),a("p",[e._v("Syntax related to "),a("code",[e._v("ecrecover")]),e._v(" and "),a("code",[e._v("ripemd160")]),e._v(" has been disabled")]),e._v(" "),a("p",[a("code",[e._v("DELEGATECALL")]),e._v(" is not available in Solidity++ at this moment")]),e._v(" "),a("p",[e._v("Syntax of inline assembly in Solidity is temporarily unavailable")]),e._v(" "),a("h2",{attrs:{id:"syntax-added-modified-in-solidity"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#syntax-added-modified-in-solidity"}},[e._v("#")]),e._v(" Syntax Added/Modified in Solidity++")]),e._v(" "),a("p",[e._v("Below syntax has been added in Solidity++")]),e._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"",base64:"Ynl0ZXMzMiBiMSA9IGZyb21oYXNoKCk7CnVpbnQgaGVpZ2h0ID0gYWNjb3VudGhlaWdodCgpOwpieXRlczMyIGIyID0gcHJldmhhc2goKTsKdWludDY0IHJhbmRvbSA9IHJhbmRvbTY0KCk7Cg=="}}),e._v(" "),a("ul",[a("li",[a("p",[a("code",[e._v("fromhash()")]),e._v(" returns request transaction's hash")])]),e._v(" "),a("li",[a("p",[a("code",[e._v("accountheight()")]),e._v(" returns latest block height of an account")])]),e._v(" "),a("li",[a("p",[a("code",[e._v("prevhash()")]),e._v(" returns latest block hash of an account")])]),e._v(" "),a("li",[a("p",[a("code",[e._v("random64()")]),e._v(" returns a random number in "),a("code",[e._v("uint64")]),e._v(". This function will return the same random number in one transaction")])]),e._v(" "),a("li",[a("p",[a("code",[e._v("nextrandom()")]),e._v(" returns a random number in "),a("code",[e._v("uint64")]),e._v(". This function can be called multiple times to obtain different random numbers in one transaction")])])]),e._v(" "),a("p",[e._v("Functions "),a("code",[e._v("address")]),e._v(" and "),a("code",[e._v("tokenId")]),e._v(" are redefined in Solidity++:")]),e._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"",base64:"dG9rZW5JZCB0b2tlbjAxID0gdG9rZW5JZCgmcXVvdDt0dGlfMjQ0NWY2ZTVjZGU4YzJjNzBlNDQ2YzgzJnF1b3Q7KTsKdG9rZW5JZCB0b2tlbjAyID0gJnF1b3Q7dHRpXzI0NDVmNmU1Y2RlOGMyYzcwZTQ0NmM4MyZxdW90OzsKYWRkcmVzcyBhZGRyMDEgPSBhZGRyZXNzKCZxdW90O3ZpdGVfMDEwMjAzMDQwNTA2MDcwODA5MDgwNzA2MDUwNDAzMDIwMTAyMDMwNGVkZGQ4Mzc0OGUmcXVvdDspOwphZGRyZXNzIGFkZHIwMiA9ICZxdW90O3ZpdGVfMDEwMjAzMDQwNTA2MDcwODA5MDgwNzA2MDUwNDAzMDIwMTAyMDMwNGVkZGQ4Mzc0OGUmcXVvdDs7Cg=="}}),e._v(" "),a("p",[e._v("Obtain transfer value in Solidity:")]),e._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"",base64:"bXNnLnZhbHVlCg=="}}),e._v(" "),a("p",[e._v("Obtain transfer value in Solidity++("),a("code",[e._v("value")]),e._v(" has been changed to "),a("code",[e._v("amount")]),e._v("):")]),e._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"",base64:"bXNnLmFtb3VudDsK"}}),e._v(" "),a("p",[e._v("Obtain transfer token id(Solidity doesn't have the feature):")]),e._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"",base64:"bXNnLnRva2VuaWQ7Cg=="}}),e._v(" "),a("p",[e._v("Obtain account balance in Solidity:")]),e._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"",base64:"YWRkcmVzcy5iYWxhbmNlCg=="}}),e._v(" "),a("p",[e._v("Obtain account balance in Solidity++(a parameter of tokenId is required):")]),e._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"",base64:"YWRkcmVzcy5iYWxhbmNlKF90b2tlbklkKQo="}}),e._v(" "),a("p",[e._v("In Solidity, send ETH to an address:")]),e._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"",base64:"YWRkcmVzcyhfYWRkcikudHJhbnNmZXIoX2Ftb3VudCk7Cg=="}}),e._v(" "),a("p",[e._v("In Solidity++, send specific token to an address:")]),e._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"",base64:"YWRkcmVzcyhfYWRkcikudHJhbnNmZXIoX3Rva2VuSWQsIF9hbW91bnQpOwo="}}),e._v(" "),a("p",[e._v("Unit of ETH in Solidity: wei/szabo/finney/ether")]),e._v(" "),a("p",[e._v("1 ether = 1000 finney, 1 finney = 1000 szabo, 1 szabo = 1000000000000 wei")]),e._v(" "),a("p",[e._v("Unit of VITE in Solidity++: attov/vite")]),e._v(" "),a("p",[e._v("1 vite = 1000000000000000000 attov")]),e._v(" "),a("p",[e._v("In Solidity++, all syntax related to "),a("code",[e._v("sha256")]),e._v(" or "),a("code",[e._v("sha3")]),e._v(" is replaced by "),a("code",[e._v("blake2b")])]),e._v(" "),a("h2",{attrs:{id:"asynchronous-syntax-in-solidity"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#asynchronous-syntax-in-solidity"}},[e._v("#")]),e._v(" Asynchronous Syntax in Solidity++")]),e._v(" "),a("p",[e._v("Unlike Solidity, in-contract communication in Solidity++ is not done through function calls, but by message passing")]),e._v(" "),a("p",[e._v("In Solidity++,")]),e._v(" "),a("ul",[a("li",[a("code",[e._v("public")]),e._v(" functions cannot be accessed from outside of the contract")]),e._v(" "),a("li",[a("code",[e._v("function")]),e._v(" cannot be declared as "),a("code",[e._v("external")]),e._v(". Instead, "),a("code",[e._v("function")]),e._v(" can only be declared as "),a("code",[e._v("public")]),e._v(", "),a("code",[e._v("private")]),e._v(" or "),a("code",[e._v("internal")])]),e._v(" "),a("li",[a("code",[e._v("public")]),e._v(" static variable is not visible from outside of the contract")])]),e._v(" "),a("p",[e._v("An example")]),e._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"",base64:"cHJhZ21hIHNvbGlkaXR5cHAgXjAuNC4zOwpjb250cmFjdCBBIHsKICAgbWVzc2FnZSBzdW0odWludCByZXN1bHQpOwoKICAgb25NZXNzYWdlIGFkZCh1aW50IGEsIHVpbnQgYikgewogICAgICAgIHVpbnQgcmVzdWx0ID0gYSArIGI7CiAgICAgICAgYWRkcmVzcyBzZW5kZXIgPSBtc2cuc2VuZGVyOwogICAgICAgIHNlbmQoc2VuZGVyLCBzdW0ocmVzdWx0KSk7CiAgIH0KfQpjb250cmFjdCBCIHsKICAgIHVpbnQgdG90YWw7CiAgICBtZXNzYWdlIGFkZCh1aW50IGEsIHVpbnQgYik7CgogICAgb25NZXNzYWdlIGludm9rZXIoYWRkcmVzcyBhZGRyLCB1aW50IGEsIHVpbnQgYikgewogICAgICAgc2VuZChhZGRyLCBhZGQoYSwgYikpOwogICAgfQoKICAgIG9uTWVzc2FnZSBzdW0odWludCByZXN1bHQpIHsKICAgICAgICBpZiAocmVzdWx0ICZndDsgMTApIHsKICAgICAgICAgICB0b3RhbCArPSByZXN1bHQ7CiAgICAgICB9CiAgICB9Cn0K"}}),e._v(" "),a("ul",[a("li",[a("p",[a("code",[e._v("message")]),e._v(": keyword, declaring a message, including message name and passed-in parameter. In above example, "),a("code",[e._v("message sum(uint result)")]),e._v(' declares message "sum" accepting a '),a("code",[e._v("uint")]),e._v(" parameter.")])]),e._v(" "),a("li",[a("p",[a("code",[e._v("onMessage")]),e._v(": keyword, declaring a message listener, including message name, passed-in parameter and business logic that handles the message. In above example, "),a("code",[e._v("onMessage add(uint a, uint b)")]),e._v(' declares message listener "add" accepting two '),a("code",[e._v("uint")]),e._v(" parameters.")])]),e._v(" "),a("li",[a("p",[a("code",[e._v("send")]),e._v(": keyword, sending a message, accepting two parameters including message receiving address and message body")])])]),e._v(" "),a("p",[e._v("Message can be declared in contract and can only be sent out from the exact contract who declares it. If a message should be processed by another contract, the name and passed-in parameters of the message rely on how message listener is defined in the other contract.")]),e._v(" "),a("p",[e._v("In other words, if contract A would like to send a message to contract B, A must define the message in a format that complies to the listener defined in contract B.")]),e._v(" "),a("p",[e._v("Message listener is defined in contract. A message listener specifies a certain type of message that can be processed by the contract. Unrecognized messages will not be handled but discarded.")]),e._v(" "),a("div",{staticClass:"custom-block warning"},[a("p",[e._v("Message listeners cannot be called directly as normal functions.")])]),e._v(" "),a("p",[e._v("In above example,")]),e._v(" "),a("p",[e._v("Contract A defines a message listener "),a("code",[e._v("add(uint a, uint b)")]),e._v(" while contract B defines "),a("code",[e._v("sum(uint result)")]),e._v(", indicating the messages that can be processed by contract A or contract B.")]),e._v(" "),a("p",[e._v('Here contract B sends message to contract A. For this purpose, contract B must declare "add" message which complies to '),a("code",[e._v("add(uint a, uint b)")]),e._v(' defined in contract A.\nSimilarly, contract A should declare "sum" message matching message listener '),a("code",[e._v("sum(uint result)")]),e._v(" of contract B, since contract A will send such a message to contract B in return.")]),e._v(" "),a("h2",{attrs:{id:"getter-in-solidity"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#getter-in-solidity"}},[e._v("#")]),e._v(" "),a("code",[e._v("getter")]),e._v(" in Solidity++")]),e._v(" "),a("p",[e._v("In Solidity++, because interactions between contracts are carried out through asynchronous messaging, the "),a("code",[e._v("public")]),e._v(" fields cannot be accessed directly from outside of the contract.\nTo address this problem, Solidity++ provides a solution.")]),e._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"",base64:"cHJhZ21hIHNvbGlkaXR5cHAgXjAuNC4zOwpjb250cmFjdCBBIHsKCiAgICB1aW50IG1hZ2ljID0gMDsKICAgCiAgICBnZXR0ZXIgZ2V0TWFnaWMoKSByZXR1cm5zKHVpbnQyNTYpIHsKICAgICAgICByZXR1cm4gbWFnaWM7CiAgICB9CgogICAgZ2V0dGVyIGdldE1hZ2ljQWRkKHVpbnQyNTYgbSkgcmV0dXJucyh1aW50MjU2KSB7CiAgICAgICAgcmV0dXJuIGNhbGN1bGF0ZShtKTsKICAgIH0KICAgIAogICAgZnVuY3Rpb24gY2FsY3VsYXRlKHVpbnQyNTYgbSkgcHVibGljIHZpZXcgcmV0dXJucyh1aW50MjU2KSB7CiAgICAgICAgcmV0dXJuIG0gKyBtYWdpYzsKICAgIH0KfQo="}}),e._v(" "),a("p",[e._v('As shown in above example, a "getter" method '),a("code",[e._v("getMagic()")]),e._v(" is defined to access public field "),a("code",[e._v("magic")]),e._v('. In general, "getter" in Solidity++ has the following characteristics:')]),e._v(" "),a("ul",[a("li",[e._v("Keyword "),a("code",[e._v("getter")]),e._v(" is used to declare such a method.")]),e._v(" "),a("li",[e._v("Method name, input parameters and return value are required. As query method, it is only used to obtain the specific field's value and cannot modify it.")]),e._v(" "),a("li",[e._v('The compiled code of "getter" is not stored on chain, so it is not allowed to access transaction related information, such as '),a("code",[e._v("msg.amount")]),e._v(" or "),a("code",[e._v("msg.tokenid")]),e._v(', within "getter".')]),e._v(" "),a("li",[e._v('"getter" cannot send transactions or send messages. It cannot call '),a("code",[e._v("require")]),e._v(" or "),a("code",[e._v("revert")]),e._v(" either.")]),e._v(" "),a("li",[e._v('"getter" can call functions, which should be defined as '),a("code",[e._v("view")]),e._v(" type.")])]),e._v(" "),a("h2",{attrs:{id:"example-of-solidity-contract"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#example-of-solidity-contract"}},[e._v("#")]),e._v(" Example of Solidity++ Contract")]),e._v(" "),a("p",[e._v("Below contract defines a batch transfer which accepts a list of addresses and amounts and then transfers specified amount to specified address in the list")]),e._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"",base64:"Ly8gRGVjbGFyZSB0aGUgY29udHJhY3QgaXMgd3JpdHRlbiBpbiBzb2xpZGl0eXBwIDAuNC4zLiBCYWNrd2FyZHMgY29tcGF0aWJpbGl0eSBpcyBndWFyYW50ZWVkIGZvciBnZW5lcmF0aW5nIHRoZSBzYW1lIGNvbXBpbGluZyByZXN1bHQuCnByYWdtYSBzb2xpZGl0eXBwIF4wLjQuMzsKIAoKLy8gRGVmaW5lIGNvbnRyYWN0IEEKY29udHJhY3QgQSB7CiAgICAgLy8gRGVmaW5lIGEgbWVzc2FnZSBsaXN0ZW5lci4gRXZlcnkgZXh0ZXJuYWwgbWV0aG9kIHNob3VsZCBiZSBkZWZpbmVkIGFzIG1lc3NhZ2UgbGlzdGVuZXIgaW4gU29saWRpdHkrKwogICAgIC8vIERlZmluZSBsaXN0ZW5lciBuYW1lIGFuZCBwYXJhbWV0ZXJzLiBWaXNpYmlsaXR5IGlzIG5vdCBuZWNlc3NhcnkuIE1lc3NhZ2UgbGlzdGVuZXIgaGFzIG5vIHJldHVybiB2YWx1ZQogICAgIC8vIE1lc3NzYWdlIGxpc3RlbmVyICZxdW90O3RyYW5zZmVyJnF1b3Q7IGlzIGRlZmluZWQgd2l0aCBhIHBhc3NlZC1pbiBwYXJhbWV0ZXIgb2YgYSB1aW50IGFycmF5LCBpbiBmb3JtYXQgb2YgYWRkcmVzcyBpbiBvZGQgZWxlbWVudCBhbmQgYW1vdW50IGluIGV2ZW4KICAgICBvbk1lc3NhZ2UgdHJhbnNmZXIodWludFtdIGNhbGxkYXRhIGJvZHkpIHBheWFibGUgewogICAgICAgICAvLyBDaGVjayBpZiB0aGUgcGFyYW1ldGVyIGxlbmd0aCBpcyBldmVuIGJlY2F1c2UgZWFjaCBhZGRyZXNzIHNob3VsZCBoYXZlIGNvcnJlc3BvbmRpbmcgYW1vdW50CiAgICAgICAgIHJlcXVpcmUoYm9keS5sZW5ndGglMj09MCk7CiAgICAgICAgIHVpbnQyNTYgdG90YWxBbW91bnQgPSAwOwogICAgICAgICBmb3IodWludCBpID0gMDsgaSAmbHQ7IGJvZHkubGVuZ3RoOyBpPWkrMikgewogICAgICAgICAgICAgdWludCBhZGRyID0gYm9keVtpXTsKICAgICAgICAgICAgIHVpbnQgYW1vdW50ID0gYm9keVtpKzFdOwogICAgICAgICAgICAgdG90YWxBbW91bnQgPSB0b3RhbEFtb3VudCArIGFtb3VudDsKICAgICAgICAgICAgIHJlcXVpcmUodG90YWxBbW91bnQgJmd0Oz0gYW1vdW50KTsKICAgICAgICAgICAgIGlmKGFtb3VudCAmZ3Q7IDApIHsKICAgICAgICAgICAgICAgIC8vIFRyYW5zZmVyIHRvIGFkZHJlc3MKICAgICAgICAgICAgICAgIGFkZHJlc3MoYWRkcikudHJhbnNmZXIobXNnLnRva2VuaWQsIGFtb3VudCk7CiAgICAgICAgICAgICB9CiAgICAgICAgIH0KICAgICAgICAgcmVxdWlyZSh0b3RhbEFtb3VudCA9PSBtc2cuYW1vdW50KTsKICAgICB9Cn0K"}})],1)}),[],!1,null,null,null);t.default=n.exports}}]);