(window.webpackJsonp=window.webpackJsonp||[]).push([[161],{775:function(a,t,e){"use strict";e.r(t);var I=e(1),g=Object(I.a)({},(function(){var a=this,t=a.$createElement,e=a._self._c||t;return e("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[e("h1",{attrs:{id:"quota-bank"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#quota-bank"}},[a._v("#")]),a._v(" Quota Bank")]),a._v(" "),e("p",[a._v("This contract demonstrates a simple quota bank that stakes to obtain quota for given address.")]),a._v(" "),e("tm-code-block",{staticClass:"codeblock",attrs:{language:"solidity",base64:"cHJhZ21hIHNvbGlkaXR5cHAgXjAuNC41Owpjb250cmFjdCBEZWxlZ2F0ZVN0YWtlIHsKCiAgICBhZGRyZXNzIGNvbnN0YW50IHN0YWtlQ29udHJhY3QgPSAmcXVvdDt2aXRlXzAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDNmNmFmNzQ1OWI5JnF1b3Q7OyAvLyBidWlsdC1pbiBxdW90YSBjb250cmFjdAogICAgdG9rZW5JZCBjb25zdGFudCB2aXRlVG9rZW5JZCA9ICZxdW90O3R0aV81NjQ5NTQ0NTIwNTQ0ZjRiNDU0ZTZlNDAmcXVvdDs7CiAgICBhZGRyZXNzIG93bmVyOwogICAgYnl0ZXMzMiBoYXNoOwogICAgbWVzc2FnZSBTdGFrZUZvclF1b3RhKGFkZHJlc3MgcmVjaXBpZW50KSBwYXlhYmxlOwogICAgbWFwcGluZyhieXRlczMyID0mZ3Q7IFN0YWtlSW5mbykgc3Rha2VNYXA7CiAgICBzdHJ1Y3QgU3Rha2VJbmZvIHsKICAgICAgICBhZGRyZXNzIGFkZHI7CiAgICAgICAgYnl0ZXMzMiBpZDsKICAgICAgICB1aW50MjU2IGFtb3VudDsKICAgIH0KCiAgICBldmVudCBTdGFrZShhZGRyZXNzIGluZGV4ZWQgYWRkciwgYnl0ZXMzMiBpZCwgdWludDI1NiBhbW91bnQpOwoKICAgIGNvbnN0cnVjdG9yKCkgcHVibGljIHBheWFibGUgewogICAgICBvd25lciA9IG1zZy5zZW5kZXI7CiAgICB9CgogICAgb25NZXNzYWdlICgpIHBheWFibGUge30gLy8gcGF5YWJsZSBmYWxsYmFjayBtZXNzYWdlIGxpc3RlbmVyIG1ha2VzIHRyYW5zZmVycmluZyB0byBjb250cmFjdCBwb3NzaWJsZQoKICAgIG9uTWVzc2FnZSBkZWxlZ2F0ZVN0YWtlKGFkZHJlc3MgYWRkciwgdWludDI1NiBhbW91bnQpIHsKICAgICAgcmVxdWlyZShvd25lciA9PSBtc2cuc2VuZGVyICZhbXA7JmFtcDsgYW1vdW50ICZndDs9IDEzNCB2aXRlKTsKICAgICAgaGFzaCA9IHNlbmQoc3Rha2VDb250cmFjdCwgU3Rha2VGb3JRdW90YShhZGRyKSwgdml0ZVRva2VuSWQsIGFtb3VudCk7IC8vIHN0YWtlIGZvciB0aGUgc3BlY2lmaWVkIGFkZHJlc3MgdG8gZ2V0IHF1b3RhCiAgICAgIHN0YWtlTWFwW2hhc2hdID0gU3Rha2VJbmZvKGFkZHIsIGhhc2gsIGFtb3VudCk7CiAgICAgIGVtaXQgU3Rha2UoYWRkciwgaGFzaCwgYW1vdW50KTsKICAgIH0KCiAgICBnZXR0ZXIgZ2V0U3Rha2VJbmZvKGJ5dGVzMzIgaGFzaCkgcmV0dXJucyhhZGRyZXNzIGFkZHIsIGJ5dGVzMzIgaWQsIHVpbnQyNTYgYW1vdW50KSB7CiAgICAgIHJldHVybiAoc3Rha2VNYXBbaGFzaF0uYWRkciwgc3Rha2VNYXBbaGFzaF0uaWQsIHN0YWtlTWFwW2hhc2hdLmFtb3VudCk7CiAgICB9CgogICAgZ2V0dGVyIGdldEhhc2goKSByZXR1cm5zKGJ5dGVzMzIpIHsKICAgICAgcmV0dXJuIGhhc2g7CiAgICB9Cn0="}}),a._v(" "),e("h4",{attrs:{id:"key-features"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#key-features"}},[a._v("#")]),a._v(" Key Features")]),a._v(" "),e("ul",[e("li",[e("p",[e("code",[a._v("onMessage () payable {}")]),a._v(" the payment fallback message listener allows in-bound transfers.")])]),a._v(" "),e("li",[e("p",[e("code",[a._v("hash = send(stakeContract, StakeForQuota(addr), viteTokenId, amount);")]),a._v(" calls the built-in quota contract's StakeForQuota message listener. "),e("code",[a._v("viteTokenId")]),a._v(" and "),e("code",[a._v("amount")]),a._v(" specify the token type and amount sent with the call.")])]),a._v(" "),e("li",[e("p",[e("code",[a._v("message StakeForQuota(address recipient) payable;")]),a._v(" declares a payable StakeForQuota message, which matches the message listener with the same name in the built-in quota contract.")])])])],1)}),[],!1,null,null,null);t.default=g.exports}}]);